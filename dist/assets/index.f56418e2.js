import{j as f,u as F,L as w,O as A,a as E,r as h,c as S,b as N,d as $,F as O,e as P,f as u,g as k,B as I,R as L,h as b,i as R,k as T}from"./vendor.2e5f90b7.js";const D=function(){const o=document.createElement("link").relList;if(o&&o.supports&&o.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))n(a);new MutationObserver(a=>{for(const l of a)if(l.type==="childList")for(const r of l.addedNodes)r.tagName==="LINK"&&r.rel==="modulepreload"&&n(r)}).observe(document,{childList:!0,subtree:!0});function c(a){const l={};return a.integrity&&(l.integrity=a.integrity),a.referrerpolicy&&(l.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?l.credentials="include":a.crossorigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function n(a){if(a.ep)return;a.ep=!0;const l=c(a);fetch(a.href,l)}};D();const e=f.exports.jsx,s=f.exports.jsxs,g=f.exports.Fragment,q=()=>{const o=F().pathname;return s("div",{className:"md:flex md:min-h-screen",children:[s("div",{className:"md:w-1/4 bg-blue-900 px-5 py-10",children:[e("h2",{className:"text-4xl font-black text-center text-white ",children:"CRM - Clientes"}),s("nav",{className:"mt-10",children:[e(w,{className:`${o==="/clientes"?"text-blue-300":"text-white"} text-2xl block mt-2 hover:text-blue-300`,to:"/clientes",children:"Clientes"}),e(w,{className:`${o==="/clientes/nuevo"?"text-blue-300":"text-white"} text-2xl block mt-2 hover:text-blue-300`,to:"/clientes/nuevo",children:"Nuevo Cliente"})]})]}),e("div",{className:"md:w-3/4 p-10 md:h-screen overflow-scroll",children:e(A,{})})]})},B=({cliente:t,handleEliminar:o})=>{const c=E(),{nombre:n,cedula:a,email:l,telefono:r,departamento:p,id:m}=t;return s("tr",{className:"border-b hover:bg-gray-50",children:[e("td",{className:"p-3",children:n}),e("td",{className:"p-3",children:a}),s("td",{className:"p-3",children:[" ",l," "]}),e("td",{className:"p-3",children:r}),e("td",{className:"p-3",children:p}),s("td",{className:"p-3",children:[e("button",{type:"button",className:"bg-yellow-500 hover:bg-yellow-600 block w-full text-white p-2 uppercase font-bold text-xs",onClick:()=>c(`/clientes/${m}`),children:"Ver"}),e("button",{type:"button",className:"bg-blue-600 hover:bg-blue-700 block w-full text-white p-2 uppercase font-bold text-xs mt-3",onClick:()=>c(`/clientes/editar/${m}`),children:"Editar"}),e("button",{type:"button",className:"bg-red-600 hover:bg-red-700 block w-full text-white p-2 uppercase font-bold text-xs mt-3",onClick:()=>o(m),children:"Eliminar"})]})]})},M=()=>{const[t,o]=h.exports.useState([]);h.exports.useEffect(()=>{(async()=>{try{const r=await(await fetch("https://localhost:44303/api/gestores")).json();o(r)}catch(a){console.log(a)}})()},[]);const c=async n=>{if(confirm("\xBFDeseas eliminar este cliente?"))try{const l=`https://localhost:44303/api/gestores/${n}`;await(await fetch(l,{method:"DELETE"})).json();const p=t.filter(m=>m.id!==n);o(p)}catch(l){console.log(l)}};return s(g,{children:[e("h1",{className:"font-black text-4xl text-blue-900",children:"Clientes"}),e("p",{className:"mt-3",children:"Administra tus clientes"}),s("table",{className:"w-full mt-5 table-auto shadow bg-white",children:[e("thead",{className:"bg-blue-800 text-white",children:s("tr",{children:[e("th",{className:"p-2",children:"Nombre"}),e("th",{className:"p-2",children:"Cedula"}),e("th",{className:"p-2",children:"Email"}),e("th",{className:"p-2",children:"Telefono"}),e("th",{className:"p-2",children:"Departamento"}),e("th",{className:"p-2",children:"Acciones"})]})}),e("tbody",{children:t.map(n=>e(B,{cliente:n,handleEliminar:c},n.id))})]})]})},x=({children:t})=>e("div",{className:"text-center my-4 bg-red-600 text-white font-bold p-3 uppercase",children:t});const j=()=>s("div",{className:"sk-chase",children:[e("div",{className:"sk-chase-dot"}),e("div",{className:"sk-chase-dot"}),e("div",{className:"sk-chase-dot"}),e("div",{className:"sk-chase-dot"}),e("div",{className:"sk-chase-dot"}),e("div",{className:"sk-chase-dot"})]}),y=({cliente:t,cargando:o})=>{var l,r,p,m,v;const c=E(),n=S().shape({nombre:N().min(3,"El Nombre es muy corto").max(20,"El Nombre es muy largo").required("El Nombre del Cliente es Obligatorio"),empresa:N().required("El Nombre de la empresa es obligatorio"),email:N().email("Email no v\xE1lido").required("El email es obligatorio"),telefono:$().positive("N\xFAmero no v\xE1lido").integer("N\xFAmero no v\xE1lido").typeError("El N\xFAmero no es v\xE1lido")}),a=async i=>{try{let d;if(t.id){const C=`https://my-json-server.typicode.com/juanpablogdl/api_crm/clientes/${t.id}`;d=await fetch(C,{method:"PUT",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}})}else d=await fetch("https://my-json-server.typicode.com/juanpablogdl/api_crm/clientes",{method:"POST",body:JSON.stringify(i),headers:{"Content-Type":"application/json"}});await d.json(),c("/clientes")}catch(d){console.log(d)}};return o?e(j,{}):s("div",{className:"bg-white mt-10 px-5 py-10 rounded-md shadow-md  md:w-3/4 mx-auto",children:[e("h1",{className:"text-gray-600 font-bold text-xl uppercase text-center",children:(t==null?void 0:t.nombre)?"Editar Cliente":"Agregar Cliente"}),e(O,{initialValues:{nombre:(l=t==null?void 0:t.nombre)!=null?l:"",empresa:(r=t==null?void 0:t.empresa)!=null?r:"",email:(p=t==null?void 0:t.email)!=null?p:"",telefono:(m=t==null?void 0:t.telefono)!=null?m:"",notas:(v=t==null?void 0:t.notas)!=null?v:""},enableReinitialize:!0,onSubmit:async(i,{resetForm:d})=>{await a(i),d()},validationSchema:n,children:({errors:i,touched:d})=>s(P,{className:"mt-10",children:[s("div",{className:"mb-4",children:[e("label",{className:"text-gray-800",htmlFor:"nombre",children:"Nombre:"}),e(u,{id:"nombre",type:"text",className:"mt-2 block w-full p-3 bg-gray-50",placeholder:"Nombre del Cliente",name:"nombre"}),i.nombre&&d.nombre?e(x,{children:i.nombre}):null]}),s("div",{className:"mb-4",children:[e("label",{className:"text-gray-800",htmlFor:"empresa",children:"Empresa:"}),e(u,{id:"empresa",type:"text",className:"mt-2 block w-full p-3 bg-gray-50",placeholder:"Empresa del Cliente",name:"empresa"}),i.empresa&&d.empresa?e(x,{children:i.empresa}):null]}),s("div",{className:"mb-4",children:[e("label",{className:"text-gray-800",htmlFor:"email",children:"E-mail:"}),e(u,{id:"email",type:"email",className:"mt-2 block w-full p-3 bg-gray-50",placeholder:"Email del Cliente",name:"email"}),i.email&&d.email?e(x,{children:i.email}):null]}),s("div",{className:"mb-4",children:[e("label",{className:"text-gray-800",htmlFor:"telefono",children:"Tel\xE9fono:"}),e(u,{id:"telefono",type:"tel",className:"mt-2 block w-full p-3 bg-gray-50",placeholder:"Tel\xE9fono del Cliente",name:"telefono"}),i.telefono&&d.telefono?e(x,{children:i.telefono}):null]}),s("div",{className:"mb-4",children:[e("label",{className:"text-gray-800",htmlFor:"notas",children:"Notas:"}),e(u,{as:"textarea",id:"notas",type:"text",className:"mt-2 block w-full p-3 bg-gray-50 h-40",placeholder:"Notas del Cliente",name:"notas"})]}),e("input",{type:"submit",value:(t==null?void 0:t.nombre)?"Editar Cliente":"Agregar Cliente",className:"mt-5 w-full bg-blue-800 p-3 text-white uppercase font-bold text-lg"})]})})]})};y.defaultProps={cliente:{},cargando:!1};const V=()=>s(g,{children:[e("h1",{className:"font-black text-4xl text-blue-900",children:"Nuevo Cliente"}),e("p",{className:"mt-3",children:"Llena los siguientes campos para registrar un cliente"}),e(y,{})]}),_=()=>{const[t,o]=h.exports.useState({}),[c,n]=h.exports.useState(!0),{id:a}=k();return h.exports.useEffect(()=>{(async()=>{try{const r=`https://my-json-server.typicode.com/juanpablogdl/api_crm/clientes/${a}`,m=await(await fetch(r)).json();o(m)}catch(r){console.log(r)}n(!c)})()},[]),s(g,{children:[e("h1",{className:"font-black text-4xl text-blue-900",children:"Editar Cliente"}),e("p",{className:"mt-3",children:"Utiliza este formulario para editar datos de un cliente"}),(t==null?void 0:t.nombre)?e(y,{cliente:t,cargando:c}):e("p",{children:"Cliente ID no v\xE1lido"})]})},z=()=>{const[t,o]=h.exports.useState({}),[c,n]=h.exports.useState(!0),{id:a}=k();return h.exports.useEffect(()=>{(async()=>{try{const r=`https://my-json-server.typicode.com/juanpablogdl/api_crm/clientes/${a}`,m=await(await fetch(r)).json();o(m)}catch(r){console.log(r)}n(!c)})()},[]),c?e(j,{}):Object.keys(t).length===0?e("p",{children:"No Hay Resultados"}):s("div",{children:[s("h1",{className:"font-black text-4xl text-blue-900",children:["Ver Cliente: ",t.nombre]}),e("p",{className:"mt-3",children:"Informaci\xF3n del Cliente"}),t.nombre&&s("p",{className:"text-4xl text-gray-600 mt-10",children:[e("span",{className:"text-gray-800 uppercase font-bold",children:"Cliente: "}),t.nombre]}),t.email&&s("p",{className:"text-2xl text-gray-600 mt-4",children:[e("span",{className:"text-gray-800 uppercase font-bold",children:"Email: "}),t.email]}),t.telefono&&s("p",{className:"text-2xl text-gray-600 mt-4",children:[e("span",{className:"text-gray-800 uppercase font-bold",children:"Tel\xE9fono: "}),t.telefono]}),t.empresa&&s("p",{className:"text-2xl text-gray-600 mt-4",children:[e("span",{className:"text-gray-800 uppercase font-bold",children:"Empresa: "}),t.empresa]}),t.notas&&s("p",{className:"text-2xl text-gray-600 mt-4",children:[e("span",{className:"text-gray-800 uppercase font-bold",children:"Notas: "}),t.notas]})]})};function J(){return e(I,{children:e(L,{children:s(b,{path:"/clientes",element:e(q,{}),children:[e(b,{index:!0,element:e(M,{})}),e(b,{path:"nuevo",element:e(V,{})}),e(b,{path:"editar/:id",element:e(_,{})}),e(b,{path:":id",element:e(z,{})})]})})})}R.render(e(T.StrictMode,{children:e(J,{})}),document.getElementById("root"));
